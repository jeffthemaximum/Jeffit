<%= @user.name %>
</br>
total upvotes:
<% total_upvotes = [] %>
<% @user.links.each do |link| %>
  <% total_upvotes << link.get_likes.size %>
<% end %>
<%= total_upvotes.inject{|sum,x| sum + x} %>

<!-- This is copy/pasted from views/links/index.html.erb ... anyway to do this without copy/paste? -->
<% @user.links.each do |link| %>
  <div class="link row clearfix">
    <h2>
      <div id=<%= link.id.to_s %>><%= link_to link.title, link %><br></div>
      <small class="author">Submitted <%= time_ago_in_words(link.created_at) %> by <%= name_checker(link.user) %></small>
    </h2>
    
    <div>
      <%= link_to link.comments.count.to_s + " comments", link_path(link, :anchor => "comments") %>
    </div>

    <div class="btn-group">
      <a class="btn btn-default btn-sm" href="<%= url_with_protocol(link.url) %>", target="_blank">Visit Link</a>
      <%= link_to like_link_path(link), method: :put, class: "btn btn-default btn-sm" do %>
        <span class="glyphicon glyphicon-chevron-up"></span>
        Upvote
        <%= link.get_upvotes.size %>
      <% end %>
      <%= link_to dislike_link_path(link), method: :put, class: "btn btn-default btn-sm" do %>
        <span class="glyphicon glyphicon-chevron-down">
        Downvote
        <%= link.get_downvotes.size %>
      <% end %>
    </div>
  <!-- This is copy/pasted from views/links/show.html.erb ... anyway to do this without copy/paste? -->
      <% if @user == current_user -%>
      <div class="btn-group">
        <%= link_to 'Edit', edit_link_path(link), class: "btn btn-default" %>
        <%= link_to 'Destroy', link, method: :delete, data: { confirm: 'Are you sure?' }, class: "btn btn-default" %>
      </div>
    </div>
  <% end %>
<% end %>

